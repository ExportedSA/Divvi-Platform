# ==============================================================================
# DIVVI PLATFORM - ENVIRONMENT CONFIGURATION
# ==============================================================================
#
# INSTRUCTIONS:
# 1. Copy this file to .env (which is gitignored)
# 2. Fill in ALL required values marked with [REQUIRED]
# 3. Generate secrets using the commands provided
# 4. NEVER commit .env to version control
#
# For production deployments, set these in your hosting platform (Vercel, etc.)
# ==============================================================================

# ==============================================================================
# DATABASE [REQUIRED]
# ==============================================================================
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
#
# Local development:
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/divvi_dev?schema=public"
#
# Production (Neon, Supabase, etc.) - set in hosting platform, not here

# ==============================================================================
# AUTHENTICATION [REQUIRED]
# ==============================================================================
# NextAuth.js configuration
#
# NEXTAUTH_URL: Full URL of your application
# - Development: http://localhost:3000
# - Production: https://yourdomain.com
NEXTAUTH_URL="http://localhost:3000"

# NEXTAUTH_SECRET: Cryptographic secret for signing tokens [REQUIRED]
# ⚠️  MUST be at least 32 characters
# ⚠️  MUST be randomly generated - DO NOT use a predictable value
#
# Generate with: openssl rand -base64 32
# Or: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
#
NEXTAUTH_SECRET=""

# ==============================================================================
# APPLICATION [REQUIRED]
# ==============================================================================
# Public app URL (exposed to browser)
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Environment mode
NODE_ENV="development"

# ==============================================================================
# EMAIL (Optional - required for notifications)
# ==============================================================================
# SMTP configuration for sending emails
# Recommended: SendGrid, Resend, AWS SES, or Postmark
#
# SMTP_HOST=""
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=""
# SMTP_PASS=""
# EMAIL_FROM="noreply@divvi.co.nz"

# ==============================================================================
# FILE STORAGE (Optional - required for photo uploads)
# ==============================================================================
# AWS S3 or compatible storage (Cloudflare R2, DigitalOcean Spaces)
#
# AWS_ACCESS_KEY_ID=""
# AWS_SECRET_ACCESS_KEY=""
# AWS_REGION="ap-southeast-2"
# AWS_S3_BUCKET=""

# ==============================================================================
# REDIS (Optional - required for production rate limiting)
# ==============================================================================
# Standard Redis URL
# REDIS_URL="redis://localhost:6379"
#
# Upstash Redis (recommended for serverless)
# UPSTASH_REDIS_REST_URL=""
# UPSTASH_REDIS_REST_TOKEN=""

# ==============================================================================
# PAYMENTS (Required for payment processing)
# ==============================================================================
# Stripe API keys
# Get from: https://dashboard.stripe.com/apikeys
#
# Secret key (server-side only - NEVER expose to client)
STRIPE_SECRET_KEY=""
#
# Webhook secret for verifying Stripe webhooks
# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=""
#
# Publishable key (safe for client-side)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=""
#
# Stripe Connect Client ID (for owner onboarding)
# Get from: https://dashboard.stripe.com/settings/connect
STRIPE_CONNECT_CLIENT_ID=""
#
# Stripe API Version (use stable version)
# See: https://stripe.com/docs/api/versioning
STRIPE_API_VERSION="2025-11-17"
#
# Platform fee percentage (default: 1.5%)
# PLATFORM_FEE_PERCENT="1.5"

# ==============================================================================
# MONITORING & OBSERVABILITY (Optional - recommended for production)
# ==============================================================================
# Sentry error tracking
# Get DSN from: https://sentry.io/settings/projects/YOUR_PROJECT/keys/
# SENTRY_DSN=""
#
# Google Analytics
# NEXT_PUBLIC_GOOGLE_ANALYTICS_ID=""
#
# Logging level (debug, info, warn, error)
LOG_LEVEL="info"

# ==============================================================================
# SECURITY
# ==============================================================================
# CORS allowed origins (comma-separated)
# Leave empty to use defaults based on NODE_ENV
# CORS_ALLOWED_ORIGINS="https://divvi.co.nz,https://www.divvi.co.nz"

# Use secure cookies (set to true in production with HTTPS)
SECURE_COOKIES=false

# ==============================================================================
# RATE LIMITING
# ==============================================================================
# Window duration in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Max requests per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# ==============================================================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# ==============================================================================
#
# DEVELOPMENT (.env or .env.development.local):
#   NODE_ENV=development
#   SECURE_COOKIES=false
#   Database: Local PostgreSQL or Neon dev branch
#
# STAGING (.env.staging or hosting platform):
#   NODE_ENV=production
#   SECURE_COOKIES=true
#   Database: Neon staging branch
#   Stripe: Test mode keys
#
# PRODUCTION (hosting platform ONLY - never in files):
#   NODE_ENV=production
#   SECURE_COOKIES=true
#   Database: Neon production
#   Stripe: Live mode keys
#   All secrets via platform environment variables
#
